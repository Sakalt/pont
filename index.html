<!DOCTYPE html>
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Pont</title>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Inconsolata&family=Lato&display=swap" rel="stylesheet">
        <link href="style.css" rel="stylesheet">
    </head>
    <body>
    <script type="module">
        import init from './pont_client.js';
        async function run() {
            await init();
        }
        run();
    </script>

    <div id="disconnected" hidden="" class="information">
        <p><i class="fas fa-exclamation-triangle"></i>
            <span id="disconnected_msg">ゲームサーバーに接続できませんでした</span>
        </p>
        <p>ページを更新して再試行してください</p>
    </div>

    <!-- ゲームに参加中のUI -->
    <div id="join">
        <form id="join_form">
            <p><b>名前:</b><input id="name_input" placeholder="ジョン・スミス" required=""></p>
            <p><b>ルーム:</b><input id="room_input" pattern="^[a-z]+ [a-z]+ [a-z]+$"></p>
            <p><button id="play_button" type="submit" class="disabled">読み込み中...</button></p>
            <p>色覚障害モード: <input type="checkbox" value="0" id="colorblind"></p>
        </form>
        <div id="err_div" hidden="">
            <i class="fas fa-exclamation-triangle"></i>
            <span id="err_span"></span>
        </div>
    </div>

    <!-- メインゲームUI -->
    <div id="playing" hidden="">
        <p><span class="noselect"><b>ルーム: </b></span>
           <span id="room_name"></span></p>
        <div id="game">
            <div id="svg_div" class="nyt">
                <svg id="dummy" viewBox="0 0 200 200"></svg>
                <div id="hand" class="background"></div>
                <div id="board" class="background"></div>
                <div id="exchange_div"><p>ここにドロップして<br>ピースを交換</p></div>
                <button id="accept_button" class="gameplay" disabled>
                    <i class="fas fa-check"></i>
                </button>
                <button id="reject_button" class="gameplay" disabled>
                    <i class="fas fa-times"></i>
                </button>
                <svg id="game_svg" width="100" height="100" viewBox="0 0 200 200">
                    <defs>
                        <clipPath id="clip_rect">
                            <rect width="200" height="175" x="0" y="0"></rect>
                        </clipPath>
                    </defs>
                    <rect id="pan_rect" width="200" height="175" x="0" y="0"></rect>
                    <g clip-path="url(#clip_rect)">
                        <g id="pan_group" transform="translate(0 0)"></g>
                    </g>
                </svg>
            </div>
            <div>
                <table id="score_table">
                    <tbody id="score_rows">
                        <tr><th style="width:20px"></th>
                            <th style="width:100%">プレイヤー</th>
                            <th style="width:60%">スコア</th>
                        </tr>
                    </tbody>
                </table>
                <div id="count_div"></div>
            </div>
            <div id="chat_div">
                <div id="chat_msgs"></div>
                <div id="chat_input_div">
                    <p><b id="chat_name"></b></p>
                    <input id="chat_input" placeholder="メッセージを送信...">
                </div>
            </div>
        </div>
    </div>

    <div id="footer">
        <p>リビジョン <span id="revhash"></span></p>
        <p>
            <a href="rules.html" target="_blank"><i class="fas fa-book"></i></a>
            <a href="rules.html" class="padded" target="_blank">ルール</a>
            <a href="https://mattkeeter.com/projects/pont" target="_blank"><i class="fas fa-home"></i></a>
            <a href="https://mattkeeter.com/projects/pont" class="padded" target="_blank">について</a>
            <a href="https://github.com/mkeeter/pont" target="_blank"><i class="fab fa-github"></i></a>
            <a href="https://github.com/mkeeter/pont" target="_blank">ソース</a>
        </p>
        <p>© 2020 <a href="https://mattkeeter.com" target="_blank">Matthew Keeter</a>&nbsp;
        <a href="https://twitter.com/impraxical" target="_blank"><i class="fab fa-twitter"></i></a>
        <a href="https://github.com/mkeeter" target="_blank"><i class="fab fa-github"></i></a>&nbsp;
        <a href="mailto:matt.j.keeter@gmail.com" target="_blank"><i class="fas fa-envelope"></i></a>&nbsp;
        </p>
    </div>
  </body>
</html>
